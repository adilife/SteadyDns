# SteadyDNS Configuration File
# Format: INI/Conf

[Database]
# Database file path (relative to working directory)
DB_PATH=steadydns.db

[Server]
# JWT secret key for authentication
# 建议使用至少32字节的随机字符串
JWT_SECRET_KEY=your_jwt_secret_key_here
# API Server port
PORT=8080

[JWT]
# Access token expiration time (minutes)
# Default: 30, Recommended: 15-60
ACCESS_TOKEN_EXPIRATION=30
# Refresh token expiration time (days)
# Default: 7, Recommended: 7-30
REFRESH_TOKEN_EXPIRATION=7
# JWT algorithm
# Default: HS256, Recommended: HS256
JWT_ALGORITHM=HS256

[API]
# API rate limit enabled
# Default: true, Recommended: true
RATE_LIMIT_ENABLED=true

# API request logging enabled
# Default: true, Recommended: true
LOG_ENABLED=true

# API log level
# Default: INFO, Recommended: INFO (production)/DEBUG (development)
LOG_LEVEL=INFO

# Log request body (may contain sensitive information)
# Default: false, Recommended: false (production)/true (development)
LOG_REQUEST_BODY=false

# Log response body (may contain sensitive information)
# Default: false, Recommended: false (production)/true (development)
LOG_RESPONSE_BODY=false

# API rate limit settings
# Default: 300, Recommended: 200-500 (normal API)
RATE_LIMIT_NORMAL=300

# API rate limit for authenticated users
# Default: 500, Recommended: 300-1000 (authenticated users)
RATE_LIMIT_USER=500

# API rate limit for login endpoint (prevent brute force)
# Default: 60, Recommended: 30-100 (login attempts)
RATE_LIMIT_LOGIN=60

# API rate limit for token refresh endpoint
# Default: 5, Recommended: 3-10 (refresh attempts)
RATE_LIMIT_REFRESH=50

# Rate limit window (seconds)
# Default: 60, Recommended: 60 (1 minute window)
RATE_LIMIT_WINDOW=60

# Maximum failures before temporary ban (normal API)
# Default: 10, Recommended: 5-20 (failure attempts)
RATE_LIMIT_MAX_FAILURES=10

# Maximum failures before temporary ban (login)
# Default: 10, Recommended: 5-20 (login failures)
RATE_LIMIT_MAX_FAILURES_LOGIN=10

# Maximum failures before temporary ban (refresh)
# Default: 3, Recommended: 2-5 (refresh failures)
RATE_LIMIT_MAX_FAILURES_REFRESH=3

# Ban duration (minutes) for normal API
# Default: 10, Recommended: 5-30 (ban minutes)
RATE_LIMIT_BAN_DURATION=10

# Ban duration (minutes) for login endpoint
# Default: 5, Recommended: 3-15 (ban minutes)
RATE_LIMIT_BAN_DURATION_LOGIN=5

# Ban duration (minutes) for refresh endpoint
# Default: 3, Recommended: 2-10 (ban minutes)
RATE_LIMIT_BAN_DURATION_REFRESH=3

[BIND]
# BIND server address
BIND_ADDRESS=127.0.0.1:5300
# RNDC key file path
RNDC_KEY=/etc/named/rndc.key
# Zone file storage path
ZONE_FILE_PATH=/usr/local/bind9/var/named
# Named configuration path
NAMED_CONF_PATH=/etc/named
# RNDC port
RNDC_PORT=9530
# BIND user
BIND_USER=named
# BIND group
BIND_GROUP=named
# BIND start command
BIND_EXEC_START=/usr/local/bind9/sbin/named -u named
# BIND reload command
BIND_EXEC_RELOAD=/usr/local/bind9/sbin/rndc -k $RNDC_KEY -s 127.0.0.1 -p $RNDC_PORT reload
# BIND stop command
BIND_EXEC_STOP=/usr/local/bind9/sbin/rndc -k $RNDC_KEY -s 127.0.0.1 -p $RNDC_PORT stop

[DNS]
# Client processing worker pool size
# Default: 10000, Recommended: 5000-10000
# Each worker handles one DNS query task. Larger values increase concurrency but also memory usage.
DNS_CLIENT_WORKERS=10000
# Task queue multiplier
# Default: 2, Recommended: 2-5
# Queue size = workers * queue multiplier, used to buffer burst requests
DNS_QUEUE_MULTIPLIER=2
# DNS server priority timeout (milliseconds)
# Default: 50, Recommended: 50-100
# Query timeout for each priority queue, affects DNS query response speed
DNS_PRIORITY_TIMEOUT_MS=50

[Security]
# DNS query rate limit per IP (queries per minute)
# Default: 600, Recommended: 300-1200 (queries per minute)
DNS_RATE_LIMIT_PER_IP=600

# Global DNS query rate limit (queries per minute)
# Default: 50000, Recommended: 30000-100000 (queries per minute)
DNS_RATE_LIMIT_GLOBAL=50000

# Ban duration (minutes) for DNS query rate limiting
# Default: 5, Recommended: 3-15 (ban minutes)
DNS_BAN_DURATION=5

[Cache]
# Cache size limit (MB)
# Default: 100, Recommended: 50-500
# Maximum memory usage for DNS cache. Larger values improve cache effectiveness but increase memory usage.
DNS_CACHE_SIZE_MB=100
# Cache cleanup interval (seconds)
# Default: 60, Recommended: 30-300
# Interval for periodic cleanup of expired cache, affects cache timeliness and system load
DNS_CACHE_CLEANUP_INTERVAL=60
# Error cache TTL (seconds)
# Default: 3600, Recommended: 1800-7200
# Cache time for DNS query errors, affects error handling efficiency
DNS_CACHE_ERROR_TTL=3600

[Logging]
# Query log storage path (relative to working directory)
# Default: log/, Recommended: relative or absolute path
# Storage location for DNS query logs. Ensure the directory exists and has write permissions.
QUERY_LOG_PATH=log/
# Query log file size limit (MB)
# Default: 10, Recommended: 5-50
# Maximum size of a single log file. A new file will be created when this size is exceeded.
QUERY_LOG_MAX_SIZE=10
# Query log file count limit
# Default: 10, Recommended: 5-20
# Maximum number of log files to retain. The oldest file will be deleted when this limit is exceeded.
QUERY_LOG_MAX_FILES=10
# Log level
# Default: DEBUG, Recommended: INFO (production)/DEBUG (development)
# Log detail level. Possible values: DEBUG, INFO, WARN, ERROR
DNS_LOG_LEVEL=DEBUG
