# SteadyDNS Configuration File
# Format: INI/Conf

[Database]
# Database file path (relative to working directory)
# Default: steadydns.db
DB_PATH=steadydns.db

[APIServer]
# API Server port
# Default: 8080, Recommended: 8080-8090
API_SERVER_PORT=8080
# API Server IPv4 address
# Default: 0.0.0.0 (listen on all IPv4 addresses)
# Recommended: 127.0.0.1 (localhost only) for production
API_SERVER_IP_ADDR=0.0.0.0
# API Server IPv6 address
# Default: :: (listen on all IPv6 addresses)
# Recommended: ::1 (localhost only) for production
API_SERVER_IPV6_ADDR=::
# GIN running mode (debug/release)
# Default: debug, Recommended: release (production)
GIN_MODE=debug

[JWT]
# JWT secret key for authentication
# Default: your-default-jwt-secret-key-change-this-in-production
# Recommended: Use a strong, unique secret key in production
JWT_SECRET_KEY=your_jwt_secret_key_here
# Access token expiration (minutes)
# Default: 30, Recommended: 15-60
ACCESS_TOKEN_EXPIRATION=30
# Refresh token expiration (days)
# Default: 7, Recommended: 1-30
REFRESH_TOKEN_EXPIRATION=7
# JWT algorithm
# Default: HS256, Recommended: HS256
JWT_ALGORITHM=HS256

[API]
# API rate limit enabled
# Default: true, Recommended: true
RATE_LIMIT_ENABLED=true
# API log enabled
# Default: true, Recommended: true
LOG_ENABLED=true
# API log level
# Default: INFO, Recommended: INFO (production)/DEBUG (development)
LOG_LEVEL=INFO
# Log request body
# Default: false, Recommended: false (production)/true (debug)
LOG_REQUEST_BODY=false
# Log response body
# Default: false, Recommended: false (production)/true (debug)
LOG_RESPONSE_BODY=false

[BIND]
# BIND server address
# Default: 127.0.0.1:5300
BIND_ADDRESS=127.0.0.1:5300
# RNDC key file path
# Default: /etc/named/rndc.key
RNDC_KEY=/etc/named/rndc.key
# Zone file storage path
# Default: /usr/local/bind9/var/named
ZONE_FILE_PATH=/usr/local/bind9/var/named
# Named configuration path
# Default: /etc/named
NAMED_CONF_PATH=/etc/named
# RNDC port
# Default: 9530
RNDC_PORT=9530
# BIND user
# Default: named
BIND_USER=named
# BIND group
# Default: named
BIND_GROUP=named
# BIND start command
# Default: /usr/local/bind9/sbin/named -u named
BIND_EXEC_START=/usr/local/bind9/sbin/named -u named
# BIND reload command
# Default: /usr/local/bind9/sbin/rndc -k $RNDC_KEY -s 127.0.0.1 -p $RNDC_PORT reload
BIND_EXEC_RELOAD=/usr/local/bind9/sbin/rndc -k $RNDC_KEY -s 127.0.0.1 -p $RNDC_PORT reload
# BIND stop command
# Default: /usr/local/bind9/sbin/rndc -k $RNDC_KEY -s 127.0.0.1 -p $RNDC_PORT stop
BIND_EXEC_STOP=/usr/local/bind9/sbin/rndc -k $RNDC_KEY -s 127.0.0.1 -p $RNDC_PORT stop
# named-checkconf executable path
# Default: /usr/local/bind9/bin/named-checkconf
BIND_CHECKCONF_PATH=/usr/local/bind9/bin/named-checkconf
# named-checkzone executable path
# Default: /usr/local/bind9/bin/named-checkzone
BIND_CHECKZONE_PATH=/usr/local/bind9/bin/named-checkzone

[DNS]
# Client processing worker pool size
# Default: 10000, Recommended: 5000-10000
# Each worker handles one DNS query task. Larger values increase concurrency but also memory usage.
DNS_CLIENT_WORKERS=10000
# Task queue multiplier
# Default: 2, Recommended: 2-5
# Queue size = workers * queue multiplier, used to buffer burst requests
DNS_QUEUE_MULTIPLIER=2
# DNS server priority timeout (milliseconds)
# Default: 50, Recommended: 50-100
# Query timeout for each priority queue, affects DNS query response speed
DNS_PRIORITY_TIMEOUT_MS=50

[Cache]
# Cache size limit (MB)
# Default: 100, Recommended: 50-500
# Maximum memory usage for DNS cache. Larger values improve cache effectiveness but increase memory usage.
DNS_CACHE_SIZE_MB=100
# Cache cleanup interval (seconds)
# Default: 60, Recommended: 30-300
# Interval for periodic cleanup of expired cache, affects cache timeliness and system load
DNS_CACHE_CLEANUP_INTERVAL=60
# Error cache TTL (seconds)
# Default: 3600, Recommended: 1800-7200
# Cache time for DNS query errors, affects error handling efficiency
DNS_CACHE_ERROR_TTL=3600

[Logging]
# Query log storage path (relative to working directory)
# Default: log/, Recommended: relative or absolute path
# Storage location for DNS query logs. Ensure the directory exists and has write permissions.
QUERY_LOG_PATH=log/
# Query log file size limit (MB)
# Default: 10, Recommended: 5-50
# Maximum size of a single log file. A new file will be created when this size is exceeded.
QUERY_LOG_MAX_SIZE=10
# Query log file count limit
# Default: 10, Recommended: 5-20
# Maximum number of log files to retain. The oldest file will be deleted when this limit is exceeded.
QUERY_LOG_MAX_FILES=10
# Log level
# Default: DEBUG, Recommended: INFO (production)/DEBUG (development)
# Log detail level. Possible values: DEBUG, INFO, WARN, ERROR
DNS_LOG_LEVEL=DEBUG

[Security]
# DNS query rate limit per IP (queries per minute)
# Default: 60, Recommended: 30-120
# Maximum number of DNS queries allowed per IP address per minute
DNS_RATE_LIMIT_PER_IP=60
# Global DNS query rate limit (queries per minute)
# Default: 10000, Recommended: 5000-20000
# Maximum number of DNS queries allowed globally per minute
DNS_RATE_LIMIT_GLOBAL=10000
# DNS query ban duration (minutes)
# Default: 5, Recommended: 1-10
# Duration to ban IP addresses that exceed rate limits
DNS_BAN_DURATION=5
# DNS message size limit (bytes)
# Default: 4096, Recommended: 4096
# Maximum size of DNS messages to prevent amplification attacks
DNS_MESSAGE_SIZE_LIMIT=4096
# DNS query validation enabled
# Default: true, Recommended: true
# Enable DNS message validation to prevent poisoning attacks
DNS_VALIDATION_ENABLED=true
